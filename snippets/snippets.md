

### Installation
Download the ASP.NET Core for Mac
Then:
```bash
ln -s /usr/local/share/dotnet/dotnet /usr/local/bin/
```

### Hello World
```
dotnet new razor -o myapp
cd myapp
dotnet run
```

### Hello World MVC
```
dotnet new mvc
dotnet run
```

### Unit test console app
```
dotnet new sln -o myApp

```
https://docs.microsoft.com/en-us/dotnet/core/testing/unit-testing-with-dotnet-test

### Docker

##### Dockerfile
```
FROM microsoft/dotnet:latest

COPY . /app

WORKDIR /app

RUN ["dotnet","restore"]
RUN ["dotnet","run"]

EXPOSE 5000/tcp
ENTRYPOINT ["dotnet","run","--server.urls","http://0.0.0.0:5000"]
```


## Sources

https://www.youtube.com/watch?v=_hy7lD9Mngw&feature=youtu.be


### Controller

```csharp
using Microsoft.AspNetCore.Mvc;
using System.Text.Encodings.Web;

namespace MvcMovie.Controllers
{
    public class HelloWorldController : Controller
    {
        // 
        // GET: /HelloWorld/

        public string Index()
        {
            return "This is my default action...";
        }

        // 
        // GET: /HelloWorld/Welcome/ 

        public string Welcome()
        {
            return "This is the Welcome action method...";
        }
    }
}

```

### Custom route params
```csharp
# in startup.cs
app.UseMvc(routes =>
{
    routes.MapRoute(
        name: "default",
        template: "{controller=Home}/{action=Index}/{id?}");
});

# in the controller
public string Welcome(string name, int ID = 1)
{
    return HtmlEncoder.Default.Encode($"Hello {name}, ID: {ID}");
}
```

### allow custom port

```
Modify Program.cs to have this method instead of the one generated by dotnet cli


        public static IWebHost BuildWebHost(string[] args)
        {
            var configuration = new ConfigurationBuilder().AddCommandLine(args).Build();

            return WebHost.CreateDefaultBuilder(args)
                .UseConfiguration(configuration)
                .UseStartup<Startup>()
                .Build();
        }

dn run --urls http://localhost:8000

dn watch run --urls http://localhost:8000

or 
dn un --url http://0.0.0.0:8080
```

```
dotnet new mvc --name Contoso

dotnet run

# in your .csproj
<ItemGroup>
    <DotNetCliToolReference Include="Microsoft.DotNet.Watcher.Tools" Version="2.0.0" />
</ItemGroup>
donet restore


dotnet add package Microsoft.EntityFrameworkCore
dotnet add package Microsoft.EntityFrameworkCore.Sqlite
dotnet add package Microsoft.EntityFrameworkCore.Design

dotnet restore

make sure to add: 
using Microsoft.EntityFrameworkCore;

```

## Angular
```
ng new myapp --skip-install

ng new client

cd client
ng serve

ng build # it will go into the build directory
ng build --prod --env=prod
```

## ASP.NET Core web api
```
dotnet new webapi -o myAPI
dotnet watch run
```


## Migrations
```
dotnet ef migrations add InitialCreate
dotnet ef database update  # apply migration

#update
dotnet ef migrations add MyDescription
dotnet ef database update

dn ef migrations remove # to undo
```


Resources

https://docs.microsoft.com/en-us/aspnet/core/tutorials/first-mvc-app-xplat/adding-controller?view=aspnetcore-2.0

simple api crud
https://medium.com/@pielegacy/an-in-depth-guide-into-a-ridiculously-simple-api-using-net-core-8f5edd427b0